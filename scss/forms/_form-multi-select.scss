//
// Multi Select
//

.form-multi-select {
  position: relative;
  display: inline-block;
  width: 100%;
  min-height: $form-multi-select-height;
  padding: $form-multi-select-padding-y ($form-multi-select-padding-x + $form-multi-select-indicator-padding) $form-multi-select-padding-y $form-multi-select-padding-x;
  font-family: $form-multi-select-font-family;
  font-size: $form-multi-select-font-size;
  font-weight: $form-multi-select-font-weight;
  line-height: $form-multi-select-line-height;
  color: var(--#{$variable-prefix}form-multi-select-color, $form-multi-select-color);
  vertical-align: middle;
  background-color: var(--#{$variable-prefix}form-multi-select-bg, $form-multi-select-bg);
  background-image: escape-svg($form-multi-select-indicator);
  background-repeat: no-repeat;
  background-position: $form-multi-select-bg-position;
  background-size: $form-multi-select-bg-size;
  border: $form-multi-select-border-width solid var(--#{$variable-prefix}form-multi-select-border-color, $form-multi-select-border-color);
  @include border-radius($form-multi-select-border-radius, 0);
  // @include box-shadow($form-select-box-shadow);
  appearance: none;

  &:disabled,
  &.disabled {
    color: var(--#{$variable-prefix}form-multi-select-disabled-color, $form-multi-select-disabled-color);
    background-color: var(--#{$variable-prefix}form-multi-select-disabled-bg, $form-multi-select-disabled-bg);
  }
}

.form-multi-select-selection-tags {
  padding: 2px ($form-multi-select-padding-x + $form-multi-select-indicator-padding) 2px 2px;

  &:not(.form-multi-select-inline) {
    .form-multi-select-search {
      height: $form-multi-select-tag-height + 4px;
      margin-left: $form-multi-select-padding-x;

      &[size] {
        height: $form-multi-select-tag-height;
      }
    }
  }
}

.form-multi-select-selection {
  display: inline;
  padding: 0;
}

// .form-multi-select-selection-cleaner {
//   position: absolute;
//   top: 50%;
//   right: 1.5rem;
//   display: inline-flex;
//   align-items: center;
//   justify-content: center;
//   width: 2rem;
//   height: 2rem;
//   font-size: 1.5rem;
//   font-weight: 700;
//   // color: var(--#{$variable-prefix}close-color, $close-color);
//   // text-shadow: var(--#{$variable-prefix}close-text-shadow, $close-text-shadow);
//   cursor: pointer;
//   opacity: .5;
//   transform: translateY(-50%);

//   // Override <a>'s hover style
//   &:hover {
//     color: var(--#{$variable-prefix}close-color, $close-color);
//     text-decoration: none;
//     opacity: .75;
//   }

//   &:focus {
//     opacity: .75;
//   }
// }

.form-multi-select-search {
  max-width: 100%;
  padding: 0;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  line-height: inherit;
  color: var(--#{$variable-prefix}form-multi-select-search-color, $form-multi-select-search-color);
  background-color: var(--#{$variable-prefix}form-multi-select-search-bg, $form-multi-select-search-bg);
  border: 0;
  appearance: none;
  @include border-radius($form-multi-select-search-border-radius, 0);

  &:focus {
    outline: 0;
  }

  &[size] {
    display: none;
    margin-left: $form-multi-select-padding-x;
  }
}

.form-multi-select-options {
  position: absolute;
  top: 100%;
  left: 0;
  display: none; // none by default, but block on "open" of the menu
  float: left;
  width: 100%;
  padding: $form-multi-select-options-padding-y $form-multi-select-options-padding-x;
  margin-top: $form-multi-select-options-margin-top;
  font-size: $form-multi-select-options-font-size;
  color: var(--#{$variable-prefix}form-multi-select-options-color, $form-multi-select-options-color);
  text-align: left; // Ensures proper alignment if parent has it changed (e.g., modal footer)
  background-color: var(--#{$variable-prefix}form-multi-select-options-bg, $form-multi-select-options-bg);
  background-clip: padding-box;
  border: $form-multi-select-options-border-width solid var(--#{$variable-prefix}form-multi-select-options-border-color, $form-multi-select-options-border-color);
  @include border-radius($form-multi-select-options-border-radius);
  @include elevation(4);
}

.form-multi-select-option {
  position: relative;
  padding: $form-multi-select-option-padding-y $form-multi-select-option-padding-x $form-multi-select-option-padding-y calc(#{$form-multi-select-option-padding-x} + #{$form-multi-select-option-indicator-width}); // stylelint-disable-line function-disallowed-list
  margin-bottom: 2px;
  vertical-align: top;
  cursor: pointer;
  @include border-radius($form-multi-select-option-border-radius, 0);

  &:hover,
  &:focus {
    color: var(--#{$variable-prefix}form-multi-select-option-hover-color, $form-multi-select-option-hover-color);
    text-decoration: none;
    // @include gradient-bg(var(--#{$variable-prefix}form-multi-select-option-hover-bg, $form-multi-select-option-hover-bg));
  }

  &.disabled,
  &:disabled {
    color: var(--#{$variable-prefix}form-multi-select-option-disabled-color, $form-multi-select-option-disabled-color);
    pointer-events: none;
    background-color: transparent;
    // Remove CSS gradients if they're enabled
    @if $enable-gradients {
      background-image: none;
    }
  }

  &::before {
    position: absolute;
    top: .7rem;
    left: $form-multi-select-option-padding-x / 2;
    display: block;
    width: $form-multi-select-option-indicator-width;
    height: $form-multi-select-option-indicator-width;
    pointer-events: none;
    content: "";
    background-color: var(--#{$variable-prefix}form-multi-select-option-indicator-bg, $form-multi-select-option-indicator-bg);
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
    border: var(--#{$variable-prefix}form-multi-select-option-indicator-border, $form-multi-select-option-indicator-border);
    @include border-radius($form-multi-select-option-indicator-border-radius);
  }

  &.form-multi-selected {
    background-color: var(--#{$variable-prefix}form-multi-select-option-selected-bg, $form-multi-select-option-selected-bg);

    &::before {
      background-color: var(--#{$variable-prefix}form-multi-select-option-selected-indicator-bg, $form-multi-select-option-selected-indicator-bg);
      background-image: var(--#{$variable-prefix}form-multi-select-option-selected-indicator-bg-image, escape-svg($form-multi-select-option-selected-indicator-bg-image));
      border-color: var(--#{$variable-prefix}form-multi-select-option-selected-indicator-border-color, $form-multi-select-option-selected-indicator-border-color);
      // @include gradient-bg(var(--#{$variable-prefix}form-multi-select-option-indicator-checked-bg, $form-multi-select-option-indicator-checked-bg));
    }
  }
}

.form-multi-select-optgroup-label {
  padding: $form-multi-select-option-padding-y ($form-multi-select-option-padding-x / 2);
  font-weight: $form-multi-select-optgroup-label-font-weight;
}

.form-multi-select-options-empty{
  padding: $form-multi-select-option-padding-y $form-multi-select-option-padding-x;
}


.form-multi-select-tag {
  display: inline-block;
  height: $form-multi-select-tag-height;
  padding: $form-multi-select-tag-padding-y $form-multi-select-tag-padding-x;
  margin: $form-multi-select-tag-margin;
  background-color: var(--#{$variable-prefix}form-multi-select-tag-bg, $form-multi-select-tag-bg);
  border: $form-multi-select-tag-border-width solid var(--#{$variable-prefix}form-multi-select-tag-border-color, $form-multi-select-tag-border-color);
  @include border-radius($form-multi-select-tag-border-radius);
}

.form-multi-select-tag-delete {
  margin-left: 6px;
  cursor: pointer;
}

.form-multi-select.show {
  color: var(--#{$variable-prefix}form-multi-select-focus-color, $form-multi-select-focus-color);
  background-color: var(--#{$variable-prefix}form-multi-select-focus-bg, $form-multi-select-focus-bg);
  border-color: var(--#{$variable-prefix}form-multi-select-focus-border-color, $form-multi-select-focus-border-color);

  @if $enable-shadows {
    @include box-shadow($form-multi-select-box-shadow, $form-multi-select-focus-box-shadow);
  } @else {
    // Avoid using mixin so we can pass custom focus shadow properly
    box-shadow: $form-multi-select-focus-box-shadow;
  }

  .form-multi-select-search[size] {
    display: inline;
  }

  .form-multi-select-options {
    z-index: $zindex-dropdown;
    display: initial;
  }
}


.form-multi-select-inline {
  padding: $form-select-padding-y;
  background: var(--#{$variable-prefix}form-multi-select-bg, $form-multi-select-bg);

  .form-multi-select-selection{
    display: block;
    margin-bottom: $form-multi-select-padding-y;
  }

  &:not(.form-multi-select-selection-tags) {
    .form-multi-select-selection{
      padding: $form-multi-select-padding-y;
    }
  }

  .form-multi-select-search {
    width: 100%;
    padding: $form-multi-select-padding-y $form-multi-select-padding-x;
    border: $form-multi-select-search-border-width solid var(--#{$variable-prefix}form-multi-select-search-border-color, $form-multi-select-search-border-color);
  }

  .form-multi-select-options {
    position: relative;
    z-index: 1;
    display: block;
    padding: 0;
    background-color: transparent;
    border: 0;
    @include elevation(0);
  }
}
